# TURN server configuration

# Listening port for TURN/STUN
listening-port=3478

# TLS listening port
tls-listening-port=5349

# Listening IP (0.0.0.0 for all interfaces)
listening-ip=0.0.0.0

# External IP (set this to your server's public IP)
external-ip=5.129.239.67

# Relay IP (usually same as listening IP)
relay-ip=0.0.0.0

# Realm for TURN server (домен вашего проекта)
realm=notfully.ru

# Server name
server-name=telegram-calls-turn

# Use long-term credential mechanism
lt-cred-mech

# Static user credentials (username:password)
user=telegram_calls:telegram_calls_turn

# Disable CLI
no-cli

# Enable verbose logging (remove in production)
verbose

# Log to stdout (for docker logs)
log-file=stdout

# Disable TLS (enable for production with valid certificates)
no-tls
no-dtls

# Maximum number of relay endpoints per user
max-bps=1000000

# Minimum and maximum port range for relay endpoints
min-port=49152
max-port=65535

# IMPORTANT: Disable all peer IP restrictions for WebRTC
# By default Coturn blocks certain IP ranges (RFC1918, loopback, etc)
# We need to disable these restrictions for WebRTC to work properly

# Allow all IP ranges explicitly (override default denied list)
allowed-peer-ip=0.0.0.0-255.255.255.255

# Mobility with ICE
mobility

# Fingerprint in TURN messages
fingerprint

# Use Redis for user database (optional, for multi-instance setup)
# redis-userdb="ip=redis port=6379 dbname=0 password= connect_timeout=30"

# Prometheus metrics (optional)
# prometheus

# Additional security
stale-nonce=600
